<?php

include("tabla_tipos.php");

$garchomp = [   
    "name"=>"garchomp",
    "hp"=>108,
    "ataque"=>130,
    "def"=>95,
    "spe"=>102,
    "img"=>"<img src='https://img.pokemondb.net/sprites/black-white/anim/normal/garchomp.gif' alt='Garchomp'></a>",
    "tipo1" => "dragón",
    "tipo2" => "tierra"
];

$charizard = [
    "name"=>"charizard",
    "hp"=>78,
    "ataque"=>84,
    "def"=>78,
    "spe"=>100,
    "img"=>"<img src='https://img.pokemondb.net/sprites/black-white/anim/normal/charizard.gif' alt='Charizard'></a>",
    "tipo1" => "fuego",
    "tipo2" => "volador"
];

$typhlosion = [
    "name"=>"typhlosion",
    "hp"=>78,
    "ataque"=>84,
    "def"=>78,
    "spe"=>100,
    "img"=>"<img src='https://img.pokemondb.net/sprites/black-white/anim/normal/typhlosion.gif' alt='Typhlosion'></a>",
    "tipo1" => "fuego",
    "tipo2" => ""
];

$umbreon = [
    "name"=>"umbreon",
    "hp"=>95,
    "ataque"=>65,
    "def"=>110,
    "spe"=>65,
    "img"=>"<img src='https://img.pokemondb.net/sprites/black-white/anim/normal/umbreon.gif' alt='Umbreon'></a>",
    "tipo1" => "siniestro",
    "tipo2" => ""
];

$vaporeon = [
    "name"=>"vaporeon",
    "hp"=>130,
    "ataque"=>65,
    "def"=>60,
    "spe"=>65,
    "img"=>"<img src='https://img.pokemondb.net/sprites/black-white/anim/normal/vaporeon.gif' alt='Vaporeon'></a>",
    "tipo1" => "agua",
    "tipo2" => ""
];

$gengar = [
    "name"=>"gengar",
    "hp"=>60,
    "ataque"=>130,
    "def"=>60,
    "spe"=>110,
    "img"=>"<img src='https://img.pokemondb.net/sprites/black-white/anim/normal/gengar.gif' alt='Gengar'></a>",
    "tipo1" => "fantasma",
    "tipo2" => "veneno"
];

$hydreigon = [
    "name"=>"hydreigon",
    "hp"=>92,
    "ataque"=>105,
    "def"=>90,
    "spe"=>98,
    "img"=>"<img src='https://img.pokemondb.net/sprites/black-white/anim/normal/hydreigon.gif' alt='Hydreigon'></a>",
    "tipo1" => "dragón",
    "tipo2" => "siniestro"
];

$crobat = [
    "name"=>"crobat",
    "hp"=>85,
    "ataque"=>90,
    "def"=>80,
    "spe"=>130,
    "img"=>"<img src='https://img.pokemondb.net/sprites/black-white/anim/normal/crobat.gif' alt='Crobat'></a>",
    "tipo1" => "veneno",
    "tipo2" => "volador"
];

$muk = [
    "name"=>"muk",
    "hp"=>105,
    "ataque"=>105,
    "def"=>75,
    "spe"=>50,
    "img"=>"<img src='https://img.pokemondb.net/sprites/black-white/anim/normal/muk.gif' alt='Muk'></a>",
    "tipo1" => "veneno",
    "tipo2" => ""
];

$gliscor = [
    "name"=>"gliscor",
    "hp"=>75,
    "ataque"=>95,
    "def"=>125,
    "spe"=>95,
    "img"=>"<img src='https://img.pokemondb.net/sprites/black-white/anim/normal/gliscor.gif' alt='Gliscor'></a>",
    "tipo1" => "tierra",
    "tipo2" => "volador"
];

$aggron = [
    "name"=>"aggron",
    "hp"=>70,
    "ataque"=>110,
    "def"=>180,
    "spe"=>50,
    "img"=>"<img src='https://img.pokemondb.net/sprites/black-white/anim/normal/aggron.gif' alt='Agron'></a>",
    "tipo1" => "acero",
    "tipo2" => "roca"
];

$haxorus = [
    "name"=>"haxorus",
    "hp"=>76,
    "ataque"=>147,
    "def"=>90,
    "spe"=>97,
    "img"=>"<img src='https://img.pokemondb.net/sprites/black-white/anim/normal/haxorus.gif' alt='haxorus'></a>",
    "tipo1" => "dragón",
    "tipo2" => ""
];

$electivire = [
    "name"=>"electivire",
    "hp"=>75,
    "ataque"=>123,
    "def"=>125,
    "spe"=>95,
    "img"=>"<img src='https://img.pokemondb.net/sprites/black-white/anim/normal/electivire.gif' alt='Electivire'></a>",
    "tipo1" => "eléctrico",
    "tipo2" => ""
]; 

$amoonguss = [
    "name"=>"amoonguss",
    "hp"=>114,
    "ataque"=>85,
    "def"=>70,
    "spe"=>30,
    "img"=>"<img src='https://img.pokemondb.net/sprites/black-white/anim/normal/amoonguss.gif' alt='Amoonguss'></a>",
    "tipo1" => "planta",
    "tipo2" => "veneno"
]; 

$serperior = [
    "name"=>"serperior",
    "hp"=>75,
    "ataque"=>75,
    "def"=>95,
    "spe"=>113,
    "img"=>"<img src='https://img.pokemondb.net/sprites/black-white/anim/normal/serperior.gif' alt='Serperior'></a>",
    "tipo1" => "planta",
    "tipo2" => ""
]; 

$kingler = [
    "name"=>"kingler",
    "hp"=>55,
    "ataque"=>130,
    "def"=>115,
    "spe"=>75,
    "img"=>"<img src='https://img.pokemondb.net/sprites/black-white/anim/normal/kingler.gif' alt='Kingler'></a>",
    "tipo1" => "agua",
    "tipo2" => ""
]; 

$volcarona = [
    "name"=>"volcarona",
    "hp"=>85,
    "ataque"=>135,
    "def"=>65,
    "spe"=>100,
    "img"=>"<img src='https://img.pokemondb.net/sprites/black-white/anim/normal/volcarona.gif' alt='Volcarona'></a>",
    "tipo1" => "bicho",
    "tipo2" => "fuego"
];

$milotic = [
    "name"=>"milotic",
    "hp"=>95,
    "ataque"=>100,
    "def"=>79,
    "spe"=>81,
    "img"=>"<img src='https://img.pokemondb.net/sprites/black-white/anim/normal/milotic.gif' alt='Milotic'></a>",
    "tipo1" => "agua",
    "tipo2" => ""
];

$krookodile = [
    "name"=>"krookodile",
    "hp"=>95,
    "ataque"=>117,
    "def"=>80,
    "spe"=>92,
    "img"=>"<img src='https://img.pokemondb.net/sprites/black-white/anim/normal/krookodile.gif' alt='Krookodile'></a>",
    "tipo1" => "tierra",
    "tipo2" => "siniestro"
];

$hariyama = [
    "name"=>"hariyama",
    "hp"=>144,
    "ataque"=>120,
    "def"=>60,
    "spe"=>50,
    "img"=>"<img src='https://img.pokemondb.net/sprites/black-white/anim/normal/hariyama.gif' alt='Hariyama'></a>",
    "tipo1" => "lucha",
    "tipo2" => ""
];

$staraptor = [
    "name"=>"staraptor",
    "hp"=>85,
    "ataque"=>120,
    "def"=>70,
    "spe"=>100,
    "img"=>"<img src='https://img.pokemondb.net/sprites/black-white/anim/normal/staraptor.gif' alt='Staraptor'></a>",
    "tipo1" => "normal",
    "tipo2" => "volador"
];

$hypno = [
    "name"=>"hypno",
    "hp"=>85,
    "ataque"=>73,
    "def"=>70,
    "spe"=>67,
    "img"=>"<img src='https://img.pokemondb.net/sprites/black-white/anim/normal/hypno.gif' alt='Hypno'></a>",
    "tipo1" => "normal",
    "tipo2" => "volador"
];

$metagross = [
    "name"=>"metagross",
    "hp"=>80,
    "ataque"=>135,
    "def"=>130,
    "spe"=>70,
    "img"=>"<img src='https://img.pokemondb.net/sprites/black-white/anim/normal/metagross.gif' alt='Metagross'></a>",
    "tipo1" => "acero",
    "tipo2" => "psíquico"
];

$weavile = [
    "name"=>"weavile",
    "hp"=>70,
    "ataque"=>120,
    "def"=>65,
    "spe"=>125,
    "img"=>"<img src='https://img.pokemondb.net/sprites/black-white/anim/normal/weavile.gif' alt='Weavile'></a>",
    "tipo1" => "siniestro",
    "tipo2" => "hielo"
];

$torkoal = [
    "name"=>"torkoal",
    "hp"=>70,
    "ataque"=>85,
    "def"=>140,
    "spe"=>20,
    "img"=>"<img src='https://img.pokemondb.net/sprites/black-white/anim/normal/torkoal.gif' alt='Torkoal'></a>",
    "tipo1" => "fuego",
    "tipo2" => ""
];

$jynx = [
    "name"=>"jynx",
    "hp"=>65,
    "ataque"=>115,
    "def"=>95,
    "spe"=>95,
    "img"=>"<img src='https://img.pokemondb.net/sprites/black-white/anim/normal/jynx.gif' alt='Jynx'></a>",
    "tipo1" => "fuego",
    "tipo2" => ""
];


$pokedex = [$garchomp,$charizard,$typhlosion,$umbreon,$vaporeon,$gengar,$hydreigon,$crobat,$muk,$gliscor,$aggron,$haxorus,
$electivire,$amoonguss,$serperior,$kingler,$volcarona,$milotic,$krookodile,$hariyama,$staraptor,$hypno,$metagross,$weavile,$torkoal,$jynx];

/**
 * Proporciona el array de datos de un pokemon según su nombre, con probabilidad de que sea variocolor
 * @param mixed $nombrePk nombre del pokemon
 * @return mixed retorna el array con la información o null si no lo encuentra
 */
function infoPokemon($nombrePk) {
    global $pokedex;

    foreach ($pokedex as $pokemon) {    // recorre el archivo buscando el pokemon según el name
        if ($pokemon['name'] === strtolower($nombrePk)) {
            $pokemonCopia = $pokemon;
            $esShiny = rand(1, 100) <= 10; //calcula la probabilidad de shiny
            if ($esShiny) {
                $pokemonCopia['img'] = cambiarEnlaceAShiny($pokemonCopia['img']);
            }
            return $pokemonCopia;
        }
    }
    return null;
}

function cambiarEnlaceAShiny($url) {
    if (strpos($url, 'normal') !== false) {
        $urlModificado = str_replace('normal', 'shiny', $url);
        return $urlModificado;
    } else {
        return $url;
    }
}

function ataqueTipos($pk1, $pk2) {
    global $tabla_efectividad;

    $tipoAtacante1 = ucfirst(strtolower($pk1['tipo1']));

    $tipoDefensor1 = ucfirst(strtolower($pk2['tipo1']));
    $tipoDefensor2 = ucfirst(strtolower($pk2['tipo2']));

    $multiplicador = 1;

    if (isset($tabla_efectividad[$tipoAtacante1][$tipoDefensor1])) {
        $multiplicador *= $tabla_efectividad[$tipoAtacante1][$tipoDefensor1];
    }

    if (!empty($tipoDefensor2) && isset($tabla_efectividad[$tipoAtacante1][$tipoDefensor2])) {
        $multiplicador *= $tabla_efectividad[$tipoAtacante1][$tipoDefensor2];
    }

    return $multiplicador;
}

